

--- FILE: ./main.tsx ---

import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)


--- FILE: ./api/axiosClient.ts ---

import axios from "axios";

const axiosClient = axios.create({
  baseURL: import.meta.env.VITE_API_URL || "http://localhost:5000/api",
  headers: {
    "Content-Type": "application/json",
  },
});

// Interceptor untuk menangani token (opsional untuk sekarang)
axiosClient.interceptors.request.use((config) => {
  const user = localStorage.getItem("user");
  if (user) {
    const { token } = JSON.parse(user);
    if (token) config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export default axiosClient;

--- FILE: ./components/forms/LoginForm.tsx ---

import { useState } from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { useNavigate } from "react-router-dom";
import { loginSchema, type LoginFormValues } from "@/utils/zodSchema";
import { useAuth } from "@/context/AuthContext";

// Import Shadcn UI
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";

// Import FontAwesome
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { 
  faEnvelope, 
  faLock, 
  faArrowRight, 
  faEye, 
  faEyeSlash 
} from "@fortawesome/free-solid-svg-icons";

export function LoginForm() {
  const [showPassword, setShowPassword] = useState(false);
  const { login, isLoading } = useAuth();
  const navigate = useNavigate();

  const form = useForm<LoginFormValues>({
    resolver: zodResolver(loginSchema),
    defaultValues: {
      email: "",
      password: "",
    },
  });

  async function onSubmit(values: LoginFormValues) {
    try {
      // Menjalankan fungsi login dari AuthContext
      await login(values);
      
      // Redirect manual (opsional, karena biasanya ProtectedRoute akan menangani ini)
      // Namun untuk UX yang baik, kita arahkan ke root/dashboard
      navigate("/");
      
      console.log("Login sukses, mengalihkan...");
    } catch (error) {
      console.error("Login failed:", error);
      // Anda bisa menambahkan toast error di sini nanti
    }
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-5">
        
        {/* Email Field */}
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem className="space-y-2">
              <FormLabel className="text-sm font-medium dark:text-white">
                Email Address
              </FormLabel>
              <FormControl>
                <div className="relative">
                  <span className="absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-gray-400">
                    <FontAwesomeIcon icon={faEnvelope} className="text-[18px]" />
                  </span>
                  <Input
                    {...field}
                    type="email"
                    placeholder="ustadz@example.com"
                    disabled={isLoading}
                    className="h-12 pl-10 border-[#d6e7d0] dark:border-gray-600 bg-background-light dark:bg-surface-dark focus:ring-2 focus:ring-primary transition-all"
                  />
                </div>
              </FormControl>
              <FormMessage className="text-xs" />
            </FormItem>
          )}
        />

        {/* Password Field */}
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem className="space-y-2">
              <div className="flex items-center justify-between">
                <FormLabel className="text-sm font-medium dark:text-white">
                  Password
                </FormLabel>
                <a
                  href="#"
                  className="text-xs font-medium text-primary hover:text-primary-dark hover:underline"
                >
                  Forgot Password?
                </a>
              </div>
              <FormControl>
                <div className="relative">
                  <span className="absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-gray-400">
                    <FontAwesomeIcon icon={faLock} className="text-[18px]" />
                  </span>
                  <Input
                    {...field}
                    type={showPassword ? "text" : "password"}
                    placeholder="Masukkan password"
                    disabled={isLoading}
                    className="h-12 pl-10 pr-10 border-[#d6e7d0] dark:border-gray-600 bg-background-light dark:bg-surface-dark focus:ring-2 focus:ring-primary transition-all"
                  />
                  <button
                    type="button"
                    onClick={() => setShowPassword(!showPassword)}
                    className="absolute right-3 top-1/2 -translate-y-1/2 text-text-secondary-light hover:text-primary transition-colors"
                  >
                    <FontAwesomeIcon icon={showPassword ? faEyeSlash : faEye} className="text-[18px]" />
                  </button>
                </div>
              </FormControl>
              <FormMessage className="text-xs" />
            </FormItem>
          )}
        />

        {/* Submit Button */}
        <Button
          type="submit"
          disabled={isLoading}
          className="w-full h-12 bg-primary hover:bg-primary-dark text-white font-semibold shadow-lg shadow-primary/20"
        >
          {isLoading ? (
            <span className="flex items-center gap-2">
              <svg className="animate-spin h-4 w-4 text-white" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
              </svg>
              Mohon tunggu...
            </span>
          ) : (
            <span className="flex items-center gap-2">
              Sign In
              <FontAwesomeIcon icon={faArrowRight} className="text-sm" />
            </span>
          )}
        </Button>
      </form>
    </Form>
  );
}

--- FILE: ./components/ui/button.tsx ---

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
        "icon-sm": "size-8",
        "icon-lg": "size-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant = "default",
  size = "default",
  asChild = false,
  ...props
}: React.ComponentProps<"button"> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      data-variant={variant}
      data-size={size}
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }


--- FILE: ./components/ui/form.tsx ---

"use client"

import * as React from "react"
import type * as LabelPrimitive from "@radix-ui/react-label"
import { Slot } from "@radix-ui/react-slot"
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from "react-hook-form"

import { cn } from "@/lib/utils"
import { Label } from "@/components/ui/label"

const Form = FormProvider

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName
}

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue
)

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  )
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState } = useFormContext()
  const formState = useFormState({ name: fieldContext.name })
  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>")
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

type FormItemContextValue = {
  id: string
}

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue
)

function FormItem({ className, ...props }: React.ComponentProps<"div">) {
  const id = React.useId()

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn("grid gap-2", className)}
        {...props}
      />
    </FormItemContext.Provider>
  )
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField()

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  )
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  )
}

function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
  const { formDescriptionId } = useFormField()

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message ?? "") : props.children

  if (!body) {
    return null
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}
    >
      {body}
    </p>
  )
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}


--- FILE: ./components/ui/input.tsx ---

import * as React from "react"

import { cn } from "@/lib/utils"

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props}
    />
  )
}

export { Input }


--- FILE: ./components/ui/label.tsx ---

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props}
    />
  )
}

export { Label }


--- FILE: ./pages/muhafidz/index.tsx ---

import { useAuth } from "@/context/AuthContext";
import { Button } from "@/components/ui/button";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faSignOutAlt, faUserTie } from "@fortawesome/free-solid-svg-icons";

export default function MuhafidzPage() {
  const { user, logout } = useAuth();

  return (
    <div className="flex min-h-screen flex-col items-center justify-center bg-background-light p-6 dark:bg-background-dark">
      <div className="w-full max-w-md rounded-xl bg-white p-8 shadow-lg dark:bg-surface-dark">
        <div className="mb-6 text-center">
          <div className="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100 text-blue-600">
            <FontAwesomeIcon icon={faUserTie} size="2x" />
          </div>
          <h1 className="text-2xl font-bold font-display">Dashboard Muhafidz</h1>
          <p className="text-text-secondary-light dark:text-text-secondary-dark">
            Assalamu'alaikum, {user?.nama || user?.email}
          </p>
        </div>

        <Button 
          onClick={logout}
          className="w-full h-12 gap-2 bg-primary hover:bg-primary-dark"
        >
          <FontAwesomeIcon icon={faSignOutAlt} />
          Logout
        </Button>
      </div>
    </div>
  );
}

--- FILE: ./pages/auth/LoginPage.tsx ---

import { LoginForm } from "@/components/forms/LoginForm";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faBookOpen } from "@fortawesome/free-solid-svg-icons";
import loginBg from "@/assets/login-bg.png"; 

export default function LoginPage() {
  return (
    <div className="flex min-h-screen w-full overflow-hidden bg-background-light dark:bg-background-dark">
      
      {/* --- Bagian Kiri: Branding & Image (Hanya muncul di Desktop) --- */}
      <div className="relative hidden w-1/2 flex-col justify-between overflow-hidden bg-surface-dark lg:flex">
        {/* Background Image dengan Overlay */}
        <div 
          className="absolute inset-0 h-full w-full bg-cover bg-center opacity-60 transition-transform duration-1000 hover:scale-105"
          style={{ backgroundImage: `url(${loginBg})` }}
        />
        
        {/* Gradient Overlay untuk keterbacaan teks */}
        <div className="absolute inset-0 bg-gradient-to-b from-background-dark/30 to-background-dark/90" />

        {/* Konten Branding */}
        <div className="relative z-10 flex h-full flex-col justify-between p-12">
          <div>
            <div className="flex items-center gap-3">
              <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-white shadow-lg shadow-primary/20">
                <FontAwesomeIcon icon={faBookOpen} />
              </div>
              <span className="text-xl font-bold tracking-wide text-white font-display">HalaqahId</span>
            </div>
          </div>

          <div className="max-w-lg">
            <h2 className="mb-4 text-4xl font-bold leading-tight text-white font-display">
              "Recite: In the name of thy Lord who created..."
            </h2>
            <p className="text-lg font-light leading-relaxed text-gray-200">
              Kelola santri, pantau hafalan, dan organisir halaqah Anda dengan lebih efisien dan terstruktur.
            </p>
          </div>

          {/* Stepper Indikator (Dekoratif) */}
          <div className="flex gap-2">
            <div className="h-1.5 w-10 rounded-full bg-primary" />
            <div className="h-1.5 w-3 rounded-full bg-white/30" />
            <div className="h-1.5 w-3 rounded-full bg-white/30" />
          </div>
        </div>
      </div>

      {/* --- Bagian Kanan: Form Login --- */}
      <div className="relative flex w-full flex-col items-center justify-center bg-surface-light p-6 dark:bg-background-dark lg:w-1/2">
        
        {/* Mobile Header Logo (Hanya muncul di layar kecil) */}
        <div className="absolute left-8 top-8 flex items-center gap-2 lg:hidden">
          <div className="flex h-9 w-9 items-center justify-center rounded-lg bg-primary text-white">
            <FontAwesomeIcon icon={faBookOpen} className="text-lg" />
          </div>
          <span className="text-xl font-bold dark:text-white font-display">HalaqahId</span>
        </div>

        <div className="mx-auto w-full max-w-md space-y-8">
          {/* Header Teks */}
          <div className="space-y-2 text-center lg:text-left">
            <h2 className="text-3xl font-bold tracking-tight text-text-primary-light dark:text-text-primary-dark font-display">
              Assalamu'alaikum, Ahlan Wa Sahlan
            </h2>
            <p className="text-base text-text-secondary-light dark:text-text-secondary-dark">
              Silakan masuk untuk mengakses Dashboard Halaqah Anda.
            </p>
          </div>

          {/* Pemanggilan Komponen LoginForm */}
          <div className="mt-8">
            <LoginForm />
          </div>

          {/* Footer Form */}
          <div className="text-center">
            <p className="text-sm text-text-secondary-light dark:text-gray-400">
              Belum memiliki akun?{" "}
              <a href="#" className="font-semibold text-primary hover:text-primary-dark transition-colors">
                Daftarkan Lembaga
              </a>
            </p>
          </div>
        </div>

        {/* Footer Copyright */}
        <div className="absolute bottom-8 left-0 w-full text-center">
          <p className="text-xs text-text-secondary-light/60 dark:text-gray-600">
            Â© 2026 Halaqah Management System. All rights reserved.
          </p>
        </div>
      </div>
    </div>
  );
}

--- FILE: ./pages/kepala-muhafidz/index.tsx ---

import { useAuth } from "@/context/AuthContext";
import { Button } from "@/components/ui/button";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faSignOutAlt, faUserShield } from "@fortawesome/free-solid-svg-icons";

export default function KepalaMuhafidzPage() {
  const { user, logout } = useAuth();

  return (
    <div className="flex min-h-screen flex-col items-center justify-center bg-background-light p-6 dark:bg-background-dark">
      <div className="w-full max-w-md rounded-xl bg-white p-8 shadow-lg dark:bg-surface-dark">
        <div className="mb-6 text-center">
          <div className="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary">
            <FontAwesomeIcon icon={faUserShield} size="2x" />
          </div>
          <h1 className="text-2xl font-bold font-display">Dashboard Kepala Musyrif</h1>
          <p className="text-text-secondary-light dark:text-text-secondary-dark">
            Selamat datang, {user?.nama || user?.email}
          </p>
        </div>

        <Button 
          onClick={logout}
          variant="destructive" 
          className="w-full h-12 gap-2"
        >
          <FontAwesomeIcon icon={faSignOutAlt} />
          Keluar dari Sistem
        </Button>
      </div>
    </div>
  );
}

--- FILE: ./services/authService.ts ---

// import axiosClient from "@/api/axiosClient";
import { type LoginFormValues } from "@/utils/zodSchema";

// Interface respons dari backend (disesuaikan dengan skema Prisma)
export interface AuthResponse {
  user: {
    id_user: number;
    email: string;
    role: "kepala_musyrif" | "muhafidz";
    is_active: boolean;
  };
  token: string;
}

export const authService = {
  login: async (credentials: LoginFormValues): Promise<AuthResponse> => {
    // KETIKA BACKEND SIAP, GUNAKAN INI:
    // const response = await axiosClient.post<AuthResponse>("/auth/login", credentials);
    // return response.data;

    // SEKARANG (MOCK VERSION):
    await new Promise((resolve) => setTimeout(resolve, 1000));
    
    if (credentials.password === "password123") {
      return {
        user: {
          id_user: 1,
          email: credentials.email,
          role: credentials.email === "kepala@test.com" ? "kepala_musyrif" : "muhafidz",
          is_active: true,
        },
        token: "mock-jwt-token",
      };
    }
    
    throw new Error("Invalid credentials");
  },

  logout: () => {
    localStorage.removeItem("user");
  }
};

--- FILE: ./App.css ---

@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

#root {
  max-width: 1280px;
  margin: 0 auto;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}


--- FILE: ./App.tsx ---

import { BrowserRouter } from "react-router-dom";
import { AuthProvider } from "@/context/AuthContext";
import { AppRouter } from "@/routes";
import "./App.css";

function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
        <AppRouter />
      </AuthProvider>
    </BrowserRouter>
  );
}

export default App;

--- FILE: ./context/AuthContext.tsx ---

import React, { createContext, useContext, useState, useEffect } from "react";
import { type LoginFormValues } from "@/utils/zodSchema";
// import { authService, type AuthResponse } from "@/services/authService"; ini digunakan ketika ada api

// Sesuaikan dengan Enum di Prisma
export type Role = "kepala_muhafidz" | "muhafidz";

interface User {
  id: number;
  email: string;
  role: Role;
  nama: string;
}

interface AuthContextType {
  user: User | null;
  login: (values: LoginFormValues) => Promise<void>;
  logout: () => void;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: React.ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  // Simulasi cek session saat pertama kali load
  useEffect(() => {
    const savedUser = localStorage.getItem("user");
    if (savedUser) setUser(JSON.parse(savedUser));
  }, []);

  const login = async (values: LoginFormValues) => {
    setIsLoading(true);
    
    // Simulasi Delay API
    await new Promise((resolve) => setTimeout(resolve, 1500));

    // MOCK LOGIC: Berdasarkan email untuk testing role
    let mockUser: User;
    
    if (values.email === "kepala@test.com") {
      mockUser = { id: 1, email: values.email, role: "kepala_muhafidz", nama: "Ustadz Admin" };
    } else {
      mockUser = { id: 2, email: values.email, role: "muhafidz", nama: "Ustadz Pembimbing" };
    }

    setUser(mockUser);
    localStorage.setItem("user", JSON.stringify(mockUser));
    setIsLoading(false);
  };

  // ketika Backend siap kita akan menggunakan ini:

// const login = async (values: LoginFormValues) => {
//   setIsLoading(true);
//   try {
//     const data = await authService.login(values);
//     setUser(data.user);
//     localStorage.setItem("user", JSON.stringify(data));
//   } catch (error) {
//     throw error;
//   } finally {
//     setIsLoading(false);
//   }
// };

  const logout = () => {
    setUser(null);
    localStorage.removeItem("user");
  };

  return (
    <AuthContext.Provider value={{ user, login, logout, isLoading }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) throw new Error("useAuth must be used within AuthProvider");
  return context;
};

--- FILE: ./index.css ---

@import "tailwindcss";

@theme {
  --color-primary: #45cf17;
  --color-primary-dark: #36a312;
  --color-background-light: #f6f8f6;
  --color-background-dark: #152111;
  --color-surface-light: #ffffff;
  --color-surface-dark: #1e2e19;
  --color-text-primary-light: #111b0e;
  --color-text-primary-dark: #f0fdf4;
  --color-text-secondary-light: #60974e;
  --color-text-secondary-dark: #a3d9a5;

  --font-display: "Lexend", sans-serif;
}

/* Pastikan Font Lexend sudah di-import di index.html atau di sini */
@import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap');

@layer base {
  body {
    @apply font-display bg-background-light text-text-primary-light dark:bg-background-dark dark:text-text-primary-dark;
  }
}

--- FILE: ./lib/utils.ts ---

import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}


--- FILE: ./routes/index.tsx ---

import { Routes, Route, Navigate } from "react-router-dom";
import LoginPage from "@/pages/auth/LoginPage";
import KepalaMuhafidzPage from "@/pages/kepala-muhafidz"; 
import MuhafidzPage from "@/pages/muhafidz"; 
import { useAuth } from "@/context/AuthContext";

// Komponen Pembatas (Hanya yang sudah login yang boleh lewat)
const ProtectedRoute = ({ children }: { children: React.ReactNode }) => {
  const { user, isLoading } = useAuth();

  if (isLoading) return <div className="flex h-screen items-center justify-center">Loading...</div>;
  if (!user) return <Navigate to="/login" replace />;

  return <>{children}</>;
};

export const AppRouter = () => {
  const { user } = useAuth();

  return (
    <Routes>
      {/* Route Login */}
      <Route 
        path="/login" 
        element={user ? <Navigate to="/" replace /> : <LoginPage />} 
      />

      {/* Route Utama dengan Proteksi */}
      <Route
        path="/"
        element={
          <ProtectedRoute>
            {/* Logic Redirect berdasarkan Role */}
            {user?.role === "kepala_muhafidz" ? (
              <Navigate to="/kepala-muhafidz" replace />
            ) : (
              <Navigate to="/muhafidz" replace />
            )}
          </ProtectedRoute>
        }
      />

      {/* Halaman-halaman Dashboard */}
      <Route 
        path="/kepala-muhafidz/*" 
        element={<ProtectedRoute><KepalaMuhafidzPage /></ProtectedRoute>}
      />
      
      <Route 
        path="/muhafidz/*" 
        element={<ProtectedRoute><MuhafidzPage /></ProtectedRoute>}
      />

      {/* Fallback jika route tidak ditemukan */}
      <Route path="*" element={<Navigate to="/login" replace />} />
    </Routes>
  );
};

--- FILE: ./utils/zodSchema.ts ---

import * as z from "zod";

export const loginSchema = z.object({
  email: z.string().email("Format email tidak valid"),
  password: z.string().min(8, "Password minimal 8 karakter"),
});

export type LoginFormValues = z.infer<typeof loginSchema>;

--- FILE: ./src.tsx ---

